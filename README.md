# work-life-balance-at-banks
Analyzing taxi transit data in NYC to understand how late employees stay at various banks.



A lot of information can be gleaned by looking at travel patterns so I decided to analyze the taxi data available via a FOIA request from 2013. The data includes the pickup and drop off times, locations (lat/long), as well as total fare, number of passengers etc. for over 150 million rides. At first I was curious to learn about the reporting of tips when the fare was paid in cash (guessing that tips are not reported unless the payment occurred via a credit card), but since that question had already been posed clearly on the page where I pulled the data from I decided to go a different route (although as a side-note a quick analysis shows that cash tipping seems to be dramatically underreported at 0.002% on average compared with a 15% average with credit cards).

A lot of emphasis is often placed on work-life balance at various companies. However, it may be of interest to understand how much of these discussions are focused around true facts versus idealized scenarios. In other words, do companies that claim to have good work-life balance really adhere to those standards? On the other end of the spectrum are the companies which are infamous for having brutal cultures and where people pull 'all nighters' just to be able to stay on top of it all. So, I decided to analyze the transit patterns around a few of the worlds top investment banks including Goldman Sachs and Deutsche Bank. A standard practice at these places is to pay for taxis for employees if they stay sufficiently late so I decided to filter all the taxi rides in NYC during 2013 and only look at those that started near a major investment bank. I decided to use a hard 50m cutoff. In order to determine which pickups were near e.g. Goldman Sachs, one must compute the distance between each pickup point and the GPS coordinate of Goldman's headquarters (and similarly for the other investment banks under consideration), however this is computationally expensive. Instead, I applied a quick box filter first, keeping only those that are within 0.0012 (longitude) and 0.001 (latitude) - this equates to about 100m and only performing the expensive distance computation on those that are actually near one of the banks in the first place. 

Once the rides have been identified that start near e.g. Goldman Sachs, we determine when it was initiated. It quickly became clear that there are of course trips that start near these banks all the time (especially since some of them are near major landmarks like Bank of America which is just a block away from Times Square and even closer to Bryant Park). However, two of the banks -- Goldman Sachs and Deutsche Bank -- are both deep in the financial district with less noise surrounding them from other attractions. Still, even among GS and DB the distributions were roughly bimodal with one rush occurring around lunch time and another one later at night. So, in order to isolate the evening crowd I decided to perform a quick k-means clustering with two clusters. In an ideal world, and with more time, I would likely refine this approach quite a bit by first trying a more sophisticated Gaussian mixture model (allowing for different variances and also a soft class assignment). However, given my first pass at this, the k-means seems to have worked reasonably well. One subtlety in using k-means clustering for time-of-day/timestamp data is that time is of course a periodic variable. While numerically 00:01 seems to be much farther away from 23:59 than it does 12:00, we of course understand that this is an artifact of the way we report time data. So, since k-means uses the naive Euclidean metric to cluster, it will necessarily lose the late night data. In order to overcome this issue, I decided to first map the timestamps to a circle (0 radians = midnight, pi radians = noon) and then map this data to the two-dimensional plane by the standard cos/sin transformations. Then, once in 2D 00:01 is actually right next to 23:59 so we can use the standard Euclidean metric without any fear. After performing kMeans clustering in 2D, I mapped the data back to the circle and ultimately back into the regular 00:00 - 23:59 interval. I only kept the evening data in order to understand the behavior of the employees late at night. 

Looking at Goldman Sachs, the distribution of pickup times had a mean of 8:29pm with a standard deviation of 2h and 27min (N = 67,661). Deutsche Bank on the other hand had a mean pickup time of 9:30pm with a standard deviation of 2h and 28min (N = 94,828). These standard deviations are of course the width of the distribution itself. The mean, being computed from a rather large sample would have a correspondingly small error ($\delta \mu / \sqrt{\sigma_1^2/n_1 + \sigma_2^2/n_2} ~$ sub-minute). So, while the means are only off by about an hour and each distribution is reasonably wide, I am fairly confident that the two means are statistically significantly different. It thus seems that for all the hype about being overworked at Goldman Sachs, they are not staying as late as the employees at Deutsche Bank are. 

There are of course many issues with this initial attempt at understanding transit behavior for these employees. First of all, there are many other banks and financial institutions near both GS and DB so we cannot be confident that we are exclusively measuring transit behavior for these two firms alone. Furthermore there are also other reasons to travel from these places even if you don't work there. It would be interesting to try to remove the background noise in a more sophisticated way than using kMeans or even a GMM. Perhaps one can look at nearby coordinates and sample from those to get a sense of what influence noise has on our measurement. Furthermore, I'd really like to analyze tipping behavior for these banks to see where the generous people work. Furthermore, since these jobs are traditionally very bonus heavy, I'd like to see if people tend to stay later just before bonuses are announced/decided. It would also be interesting to correlate pickup time with where the people are traveling to. Are the senior people (who most likely live in more expensive areas) leaving before the junior people (who most likely live in less expensive areas)? How does this behavior change prior to bonus season? 


In conclusion, there are a lot of interesting things one can learn from when and where people are traveling, work-life balance for various companies being one of them.
